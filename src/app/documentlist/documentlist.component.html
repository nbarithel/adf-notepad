<div class="app-docsAndViewer">

    <div class="app-doc-list">
      <adf-upload-drag-area
        acceptedFilesType=".rtf,.txt,.xml,.html"
        (success)="success($event,'uploaded')">

        <adf-breadcrumb
          [target]="documentList"
          [folderNode]="documentList.folderNode">
        </adf-breadcrumb>

        <adf-document-list
          #documentList
          [currentFolderId]="myStartFolder"
          [contentActions]="true"
          [rowFilter]="fileFilter"
          [allowDropFiles]="true"
          (nodeClick)= "getNodeId($event)"
          (ready)="ready()">

          <content-actions>

            <content-action
              icon="get_app"
              title="Télécharger"
              handler="download">
            </content-action>

            <content-action
              icon="content_copy"
              title="Copier"
              permission="update"
              handler="copy"
              (execute)="success($event,'Copied')">
            </content-action>

            <content-action
              icon="subdirectory_arrow_left"
              title="Déplacer"
              permission="update"
              handler="move"
              (execute)="success($event,'Moved')">
            </content-action>

            <content-action
              icon="delete"
              title="Supprimer"
              permission="update"
              (execute)="success($event,'Deleted')">
            </content-action>

          </content-actions>

        </adf-document-list>
        <adf-pagination
          [target]="documentList"
          *ngIf="notesNumber != 0">
        </adf-pagination>
      </adf-upload-drag-area>
    </div>

    <adf-toolbar-divider class="adf-toolbar-divider-doclist"></adf-toolbar-divider>

    <adf-info-drawer (selectedIndexChange)="showTabs($event)" *ngIf="nodeId && !createNote">

      <adf-info-drawer-tab icon="notes" label="Note">
          <div info-drawer-content id="info-drawer-content-editor">
            <app-text-editor [node]="node" (success)="success($event,'enregistrée')"></app-text-editor>
          </div>
      </adf-info-drawer-tab>

      <adf-info-drawer-tab icon="description" label="Propriétés">
        <adf-content-metadata-card [node]="node"></adf-content-metadata-card>
        <app-notepad-social [nodeId]="nodeId">
        </app-notepad-social>
      </adf-info-drawer-tab>

      <adf-info-drawer-tab icon="ballot" label="Versions">
        <mat-card>
          <mat-card-content>
            <adf-version-list [node]="node">
            </adf-version-list>
          </mat-card-content>
        </mat-card>
      </adf-info-drawer-tab>

      <adf-info-drawer-tab icon="comment" label="Commentaire ({{ commentsNumber }})">
        <app-comments (commentsNumber)="getCommentsNumber($event)" [nodeId]="nodeId"></app-comments>
      </adf-info-drawer-tab>

    </adf-info-drawer>

    <adf-info-drawer-layout *ngIf="!nodeId && !createNote">
      <div info-drawer-content  class="empty-align">
        <adf-empty-content
          icon="waves"
          title="Veuillez sélectionner une note pour afficher ses informations"
          subtitle="Vous avez actuellement {{ notesNumber }} notes enregistrées">
        </adf-empty-content>
        <button class="createNote-button" mat-button (click)="createNotes()">
          <mat-icon>create</mat-icon>
          Créer une note
        </button>
      </div>
    </adf-info-drawer-layout>


    <adf-info-drawer-layout *ngIf="createNote && !nodeId">
      <div info-drawer-title>Edition de note</div>
      <div info-drawer-content id="info-drawer-content-editor">
        <app-text-editor (success)="success($event,'enregistrée')"></app-text-editor>
      </div>
    </adf-info-drawer-layout>

  </div>

  <adf-file-uploading-dialog></adf-file-uploading-dialog>
