<div class="app-docsAndViewer" >

    <div class="app-doc-list" id='leftEl'>
      <adf-upload-drag-area
        acceptedFilesType=",text,.rtf,.txt,.xml,.html"
        (success)="success($event,'uploaded')">

        <adf-toolbar>
            <adf-toolbar-title>
              <adf-breadcrumb
                [target]="documentList"
                [folderNode]="documentList.folderNode">
              </adf-breadcrumb>
            </adf-toolbar-title>
        </adf-toolbar>

        <adf-document-list
          #documentList
          [currentFolderId]="currentFolderId"
          [contentActions]="true"
          [rowFilter]="nodeFilter"
          [allowDropFiles]="true"
          (nodeClick)= "getNodeId($event)"
          (ready)="ready()">

          <data-columns>
              <data-column key="icon" type="image" [sortable]="false"></data-column>

              <data-column
                title="ADF-DOCUMENT-LIST.LAYOUT.NAME"
                key="name"
                class="adf-data-table-cell--ellipsis__name">
                <ng-template let-entry="$implicit">
                    <span>{{ entry.row.getValue('name') }}</span>
                    <adf-tag-node-list  [nodeId]="entry.row.getValue('id')"></adf-tag-node-list>
                </ng-template>
              </data-column>

              <data-column key="content.sizeInBytes" type="fileSize" title="ADF-DOCUMENT-LIST.LAYOUT.SIZE"></data-column>

              <data-column key="modifiedAt" type="date" format="short" title="ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON" >
              </data-column>

              <data-column key="modifiedByUser.displayName" title="ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY"></data-column>

          </data-columns>

          <content-actions>

            <content-action
              icon="get_app"
              title="DOCUMENT.CONTENT_ACTION.DOWNLOAD"
              handler="download">
            </content-action>

            <content-action
              icon="gesture"
              title="DOCUMENT.CONTENT_ACTION.RENAME"
              permission="update"
              (execute)="rename($event)">
            </content-action>

            <content-action
              icon="content_copy"
              title="NODE_SELECTOR.COPY"
              permission="update"
              handler="copy"
              (execute)="success($event,'Copied')">
            </content-action>

            <content-action
              icon="subdirectory_arrow_left"
              title="NODE_SELECTOR.MOVE"
              permission="update"
              handler="move"
              (execute)="success($event,'Moved')">
            </content-action>

            <content-action
              icon="delete"
              title="ADF_VERSION_LIST.ACTIONS.DELETE"
              permission="update"
              (execute)="success($event,'Deleted')">
            </content-action>

          </content-actions>

        </adf-document-list>

        <adf-pagination
          [target]="documentList"
          *ngIf="notesNumber != 0">
        </adf-pagination>
      </adf-upload-drag-area>
    </div>

    <adf-toolbar-divider appResizer class="adf-toolbar-divider-doclist"></adf-toolbar-divider>


    <app-info-drawer (selectedIndexChange)="showTabs($event)" *ngIf="nodeId && !createNote">

      <app-info-drawer-tab icon="notes" label="Note">
          <div info-drawer-content id="info-drawer-content-editor">
            <app-text-editor [parentId]="currentFolderId" [node]="node" (success)="success($event,'enregistrée')"></app-text-editor>
          </div>
      </app-info-drawer-tab>

      <app-info-drawer-tab icon="description" label="{{'METADATA.BASIC.HEADER' | translate}}">
        <adf-content-metadata-card [node]="node"></adf-content-metadata-card>
        <app-notepad-social [nodeId]="nodeId">
        </app-notepad-social>
      </app-info-drawer-tab>

      <app-info-drawer-tab icon="ballot" label="Versions" badge="{{ versions.versions.length }}">
        <mat-card>
          <mat-card-content>
            <adf-version-list [node]="node" #versions>
            </adf-version-list>
          </mat-card-content>
        </mat-card>
      </app-info-drawer-tab>

      <app-info-drawer-tab icon="link" label="{{'DOCUMENT.CONTENT_VIEW.LINKDOC' | translate}}" badge="{{ appendix.appendixNodesNumber }}">
        <mat-card>
          <mat-card-content>
            <app-appendix [node]="node" (success)="documentList.reload()" #appendix></app-appendix>
          </mat-card-content>
        </mat-card>
      </app-info-drawer-tab>

      <app-info-drawer-tab icon="comment" label="{{'DOCUMENT.CONTENT_VIEW.COMMENTS' | translate}}" badge="{{ comment.commentsNumber }}">
          <mat-card>
            <app-comments [nodeId]="nodeId" #comment></app-comments>
            <app-tag [nodeId]="nodeId"></app-tag>
          </mat-card>
      </app-info-drawer-tab>

    </app-info-drawer>

    <adf-info-drawer-layout *ngIf="!nodeId && !createNote">
      <div info-drawer-content  class="empty-align">
        <adf-empty-content
          icon="waves"
          title="{{'DOCUMENT.EMPTY_CONTENT.TITLE' | translate}}"
          [subtitle]="translatedText">
        </adf-empty-content>
        <button class="createNote-button" mat-button matTooltip="{{ 'TOOLTIP.NEW_NOTE' | translate }}" (click)="createNotes()">
          <mat-icon>create</mat-icon>
          {{'SIDENAV.MENU.NOTE' | translate}}
        </button>
      </div>
    </adf-info-drawer-layout>


    <adf-info-drawer-layout *ngIf="createNote && !nodeId">
      <div info-drawer-title>Edition de note</div>
      <div info-drawer-content id="info-drawer-content-editor">
        <app-text-editor [parentId]="currentFolderId" (success)="success($event,'enregistrée')"></app-text-editor>
      </div>
    </adf-info-drawer-layout>

  </div>

  <adf-file-uploading-dialog></adf-file-uploading-dialog>
